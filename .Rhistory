colnames(TMmid) <- trimws(colnames(TMmid))
TMmid <- TMmid%>%select(hauptlink, Position, `inline.table`, hauptlink.2, `inline.table.2`, rechts)
TMmid$name<-TMmid$hauptlink
TMmid$transfer_fee<-TMmid$rechts
TMmid$detailed_position<-TMmid$inline.table
TMmid$league<-TMmid$inline.table.2
TMmid$club<-TMmid$hauptlink.2
TMmid<-TMmid%>%select(name,transfer_fee,Position,club,league,detailed_position)
View(TMmid)
TMgk<-read.csv("/Users/anweshanadhikari/Documents/Market-Value-Predictor/transferfee/GKs.csv")
TMgk$Position<-"GK"
colnames(TMgk) <- trimws(colnames(TMgk))
TMgk <- TMgk%>%select(hauptlink, Position, `inline.table`, hauptlink.2, `inline.table.2`, rechts)
View(TMgk)
TMdef<-read.csv("/Users/anweshanadhikari/Documents/Market-Value-Predictor/transferfee/defenders.csv")
TMdef$Position<-"Defence"
colnames(TMdef) <- trimws(colnames(TMdef))
TMdef <- TMdef%>%select(hauptlink, Position, `inline.table`, hauptlink.2, `inline.table.2`, rechts)
TMdef$name<-TMdef$hauptlink
TMdef$transfer_fee<-TMdef$rechts
TMdef$detailed_position<-TMdef$inline.table
TMdef$league<-TMdef$inline.table.2
TMdef$club<-TMdef$hauptlink.2
TMdef<-TMdef%>%select(name,transfer_fee,Position,club,league,detailed_position)
View(TMdef)
library(rvest)
library(dplyr)
alabama_counties <- c("Autauga", "Baldwin", "Barbour", "Bibb", "Blount", "Bullock", "Butler", "Calhoun", "Chambers", "Cherokee", "Chilton", "Choctaw", "Clarke", "Clay", "Cleburne", "Coffee", "Colbert", "Conecuh", "Coosa", "Covington", "Crenshaw", "Cullman", "Dale", "Dallas", "DeKalb", "Elmore", "Escambia", "Etowah", "Fayette", "Franklin", "Geneva", "Greene", "Hale", "Henry", "Houston", "Jackson", "Jefferson", "Lamar", "Lauderdale", "Lawrence", "Lee", "Limestone", "Lowndes", "Macon", "Madison", "Marengo", "Marion", "Marshall", "Mobile", "Monroe", "Montgomery", "Morgan", "Perry", "Pickens", "Pike", "Randolph", "Russell", "St. Clair", "Shelby", "Sumter", "Talladega", "Tallapoosa", "Tuscaloosa", "Walker", "Washington", "Wilcox", "Winston")
alabama_data <- data.frame()
# Loop through the counties
for (county_name in alabama_counties) {
# Replace spaces in county names with dashes
county_url_name <- gsub(" ", "-", county_name)
# Set the URL for the Redfin website with the current county
url <- paste0("https://www.redfin.com/county/119/AL/", county_url_name, "/filter/min-beds=2,max-beds=2,min-baths=1")
webpage <- read_html(url)
# Extract price info
price_info <- webpage %>%
html_nodes(xpath = '//*[contains(@id, "MapHomeCard_")]/div/div/div[2]') %>%
html_text()
# Extract county name
county <- rep(county_name, length(price_info))
# Extract state name
state <- rep("Alabama", length(price_info))
# Create a data frame
county_data <- data.frame(State = state, County = county, Price_Info = price_info)
alabama_data <- rbind(alabama_data, county_data) # corrected line
}
print(alabama_data)
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/",
)
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/",
)
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/",
)
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/"
)
state_counties <- list(
Alaska = c("Aleutians East Borough", "Aleutians West Census Area", "Anchorage Municipality", "Bethel Census Area", "Bristol Bay Borough", "Chugach Census Area1", "Copper River Census Area1", "Denali Borough", "Dillingham Census Area", "Fairbanks North Star Borough", "Haines Borough", "Hoonah-Angoon Census Area", "Juneau City and Borough", "Kenai Peninsula Borough", "Ketchikan Gateway Borough", "Kodiak Island Borough", "Kusilvak Census Area", "Lake and Peninsula Borough", "Matanuska-Susitna Borough", "Nome Census Area", "North Slope Borough", "Northwest Arctic Borough", "Petersburg Borough", "Prince of Wales-Hyder Census Area", "Sitka City and Borough", "Skagway Municipality", "Southeast Fairbanks Census Area", "Valdez-Cordova Census Area1", "Wrangell City and Borough", "Yakutat City and Borough", "Yukon-Koyukuk Census Area"),
Arizona = c("Apache", "Cochise", "Coconino", "Gila", "Graham", "Greenlee", "La Paz", "Maricopa", "Mohave", "Navajo", "Pima", "Pinal", "Santa Cruz", "Yavapai", "Yuma"),
Arkansas = c("Arkansas", "Ashley", "Baxter", "Benton", "Boone", "Bradley", "Calhoun", "Carroll", "Chicot", "Clark", "Clay", "Cleburne", "Cleveland", "Columbia", "Conway", "Craighead", "Crawford", "Crittenden", "Cross", "Dallas", "Des")
)
state_names <- names(state_urls)
for (state_index in 1:length(state_names)) {
state_data <- data.frame()
for (county_name in state_counties[[state_index]]) {
county_url_name <- gsub(" ", "-", county_name)
url <- paste0(state_urls[[state_names[state_index]]], county_url_name, "/filter/min-beds=2,max-beds=2,min-baths=1")
webpage <- read_html(url)
if (is.null(webpage)) {
next
}
# Extract price info
price_info <- webpage %>%
html_nodes(xpath = '//*[contains(@id, "MapHomeCard_")]/div/div/div[2]') %>%
html_text()
# Extract county name
county <- rep(county_name, length(price_info))
# Extract state name
state <- rep(state_names[state_index], length(price_info))
# Create a data frame
county_data <- data.frame(State = state, County = county, Price_Info = price_info)
state_data <- rbind(state_data, county_data)
}
assign(state_names[state_index], state_data)
}
View(state_data)
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/")
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/")
state_counties <- list(
Alaska = c("Aleutians East Borough", "Aleutians West Census Area", "Anchorage Municipality", "Bethel Census Area", "Bristol Bay Borough", "Chugach Census Area1", "Copper River Census Area1", "Denali Borough", "Dillingham Census Area", "Fairbanks North Star Borough", "Haines Borough", "Hoonah-Angoon Census Area", "Juneau City and Borough", "Kenai Peninsula Borough", "Ketchikan Gateway Borough", "Kodiak Island Borough", "Kusilvak Census Area", "Lake and Peninsula Borough", "Matanuska-Susitna Borough", "Nome Census Area", "North Slope Borough", "Northwest Arctic Borough", "Petersburg Borough", "Prince of Wales-Hyder Census Area", "Sitka City and Borough", "Skagway Municipality", "Southeast Fairbanks Census Area", "Valdez-Cordova Census Area1", "Wrangell City and Borough", "Yakutat City and Borough", "Yukon-Koyukuk Census Area"),
Arizona = c("Apache", "Cochise", "Coconino", "Gila", "Graham", "Greenlee", "La Paz", "Maricopa", "Mohave", "Navajo", "Pima", "Pinal", "Santa Cruz", "Yavapai", "Yuma"))
state_names <- names(state_urls)
for (state_index in 1:length(state_names)) {
state_data <- data.frame()
for (county_name in state_counties[[state_index]]) {
county_url_name <- gsub(" ", "-", county_name)
url <- paste0(state_urls[[state_names[state_index]]], county_url_name, "/filter/min-beds=2,max-beds=2,min-baths=1")
webpage <- read_html(url)
if (is.null(webpage)) {
next
}
# Extract price info
price_info <- webpage %>%
html_nodes(xpath = '//*[contains(@id, "MapHomeCard_")]/div/div/div[2]') %>%
html_text()
# Extract county name
county <- rep(county_name, length(price_info))
# Extract state name
state <- rep(state_names[state_index], length(price_info))
# Create a data frame
county_data <- data.frame(State = state, County = county, Price_Info = price_info)
state_data <- rbind(state_data, county_data)
}
assign(state_names[state_index], state_data)
}
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/"
)
state_counties <- list(
Alaska = c("Aleutians East Borough", "Aleutians West Census Area", "Anchorage Municipality", "Bethel Census Area", "Bristol Bay Borough", "Chugach Census Area1", "Copper River Census Area1", "Denali Borough", "Dillingham Census Area", "Fairbanks North Star Borough", "Haines Borough", "Hoonah-Angoon Census Area", "Juneau City and Borough", "Kenai Peninsula Borough", "Ketchikan Gateway Borough", "Kodiak Island Borough", "Kusilvak Census Area", "Lake and Peninsula Borough", "Matanuska-Susitna Borough", "Nome Census Area", "North Slope Borough", "Northwest Arctic Borough", "Petersburg Borough", "Prince of Wales-Hyder Census Area", "Sitka City and Borough", "Skagway Municipality", "Southeast Fairbanks Census Area", "Valdez-Cordova Census Area1", "Wrangell City and Borough", "Yakutat City and Borough", "Yukon-Koyukuk Census Area"),
Arizona = c("Apache", "Cochise", "Coconino", "Gila", "Graham", "Greenlee", "La Paz", "Maricopa", "Mohave", "Navajo", "Pima", "Pinal", "Santa Cruz", "Yavapai", "Yuma"),
Arkansas = c("Arkansas", "Ashley", "Baxter", "Benton", "Boone", "Bradley", "Calhoun", "Carroll", "Chicot", "Clark", "Clay", "Cleburne", "Cleveland", "Columbia", "Conway", "Craighead", "Crawford", "Crittenden", "Cross", "Dallas", "Des")
)
state_names <- names(state_urls)
for (state_index in 1:length(state_names)) {
state_data <- data.frame()
for (county_name in state_counties[[state_index]]) {
county_url_name <- gsub(" ", "-", county_name)
url <- paste0(state_urls[[state_names[state_index]]], county_url_name, "/filter/min-beds=2,max-beds=2,min-baths=1")
webpage <- read_html(url)
if (is.null(webpage)) {
next
}
# Extract price info
price_info <- webpage %>%
html_nodes(xpath = '//*[contains(@id, "MapHomeCard_")]/div/div/div[2]') %>%
html_text()
# Extract county name
county <- rep(county_name, length(price_info))
# Extract state name
state <- rep(state_names[state_index], length(price_info))
# Create a data frame
county_data <- data.frame(State = state, County = county, Price_Info = price_info)
state_data <- rbind(state_data, county_data)
}
assign(state_names[state_index], state_data)
}
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/"
)
state_counties <- list(
Alaska = c("Aleutians East Borough", "Aleutians West Census Area", "Anchorage Municipality", "Bethel Census Area", "Bristol Bay Borough", "Chugach Census Area1", "Copper River Census Area1", "Denali Borough", "Dillingham Census Area", "Fairbanks North Star Borough", "Haines Borough", "Hoonah-Angoon Census Area", "Juneau City and Borough", "Kenai Peninsula Borough", "Ketchikan Gateway Borough", "Kodiak Island Borough", "Kusilvak Census Area", "Lake and Peninsula Borough", "Matanuska-Susitna Borough", "Nome Census Area", "North Slope Borough", "Northwest Arctic Borough", "Petersburg Borough", "Prince of Wales-Hyder Census Area", "Sitka City and Borough", "Skagway Municipality", "Southeast Fairbanks Census Area", "Valdez-Cordova Census Area1", "Wrangell City and Borough", "Yakutat City and Borough", "Yukon-Koyukuk Census Area"),
Arizona = c("Apache", "Cochise", "Coconino", "Gila", "Graham", "Greenlee", "La Paz", "Maricopa", "Mohave", "Navajo", "Pima", "Pinal", "Santa Cruz", "Yavapai", "Yuma"),
Arkansas = c("Arkansas", "Ashley", "Baxter", "Benton", "Boone", "Bradley", "Calhoun", "Carroll", "Chicot", "Clark", "Clay", "Cleburne", "Cleveland", "Columbia", "Conway", "Craighead", "Crawford", "Crittenden", "Cross", "Dallas", "Des")
)
state_names <- names(state_urls)
all_data <- list()
for (state_index in 1:length(state_names)) {
state_data <- data.frame()
for (county_name in state_counties[[state_index]]) {
county_url_name <- gsub(" ", "-", county_name)
url <- paste0(state_urls[[state_names[state_index]]], county_url_name, "/filter/min-beds=2,max-beds=2,min-baths=1")
webpage <- tryCatch(
{
read_html(url)
},
error = function(e) {
return(NULL)
}
)
if (is.null(webpage)) {
next
}
# Extract price info
price_info <- webpage %>%
html_nodes(xpath = '//*[contains(@id, "MapHomeCard_")]/div/div/div[2]') %>%
html_text()
# Extract county name
county <- rep(county_name, length(price_info))
# Extract state name
state <- rep(state_names[state_index], length(price_info))
# Create a data frame
county_data <- data.frame(State = state, County = county, Price_Info = price_info)
state_data <- rbind(state_data, county_data)
}
all_data[[state_names[state_index]]] <- state_data
}
final_data <- do.call(rbind, all_data)
View(final_data)
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/",
California_url <- "https://www.redfin.com/county/303/CA/",
Colorado_url <- "https://www.redfin.com/county/361/CO/",
Connecticut_url <- "https://www.redfin.com/county/425/CT/",
Delaware_url <- "https://www.redfin.com/county/433/DE/",
Florida_url <- "https://www.redfin.com/county/437/FL/",
Georgia_url <- "https://www.redfin.com/county/504/GA/",
Hawaii_url <- "https://www.redfin.com/county/663/HI/",
Idaho_url <- "https://www.redfin.com/county/692/ID/",
Illinois_url <- "https://www.redfin.com/county/813/IL/",
Indiana_url <- "https://www.redfin.com/county/850/IN/",
Iowa_url <- "https://www.redfin.com/county/909/IA/"
)
state_counties <- list(
Alaska = c("Aleutians East Borough", "Aleutians West Census Area", "Anchorage Municipality", "Bethel Census Area", "Bristol Bay Borough", "Chugach Census Area1", "Copper River Census Area1", "Denali Borough", "Dillingham Census Area", "Fairbanks North Star Borough", "Haines Borough", "Hoonah-Angoon Census Area", "Juneau City and Borough", "Kenai Peninsula Borough", "Ketchikan Gateway Borough", "Kodiak Island Borough", "Kusilvak Census Area", "Lake and Peninsula Borough", "Matanuska-Susitna Borough", "Nome Census Area", "North Slope Borough", "Northwest Arctic Borough", "Petersburg Borough", "Prince of Wales-Hyder Census Area", "Sitka City and Borough", "Skagway Municipality", "Southeast Fairbanks Census Area", "Valdez-Cordova Census Area1", "Wrangell City and Borough", "Yakutat City and Borough", "Yukon-Koyukuk Census Area"),
Arizona = c("Apache", "Cochise", "Coconino", "Gila", "Graham", "Greenlee", "La Paz", "Maricopa", "Mohave", "Navajo", "Pima", "Pinal", "Santa Cruz", "Yavapai", "Yuma"),
Arkansas = c("Arkansas", "Ashley", "Baxter", "Benton", "Boone", "Bradley", "Calhoun", "Carroll", "Chicot", "Clark", "Clay", "Cleburne", "Cleveland", "Columbia", "Conway", "Craighead", "Crawford", "Crittenden", "Cross", "Dallas", "Des"),
California= c("Alameda", "Alpine", "Amador", "Butte", "Calaveras", "Colusa", "Contra Costa", "Del Norte", "El Dorado", "Fresno", "Glenn", "Humboldt", "Imperial", "Inyo", "Kern", "Kings", "Lake", "Lassen", "Los Angeles", "Madera", "Marin", "Mariposa", "Mendocino", "Merced", "Modoc", "Mono", "Monterey", "Napa", "Nevada", "Orange", "Placer", "Plumas", "Riverside", "Sacramento", "San Benito", "San Bernardino", "San Diego", "San Francisco", "San Joaquin", "San Luis Obispo", "San Mateo", "Santa Barbara", "Santa Clara", "Santa Cruz", "Shasta", "Sierra", "Siskiyou", "Solano", "Sonoma", "Stanislaus", "Sutter", "Tehama", "Trinity", "Tulare", "Tuolumne", "Ventura", "Yolo", "Yuba"),
Colorado= c("Adams", "Alamosa", "Arapahoe", "Archuleta", "Baca", "Bent", "Boulder", "Broomfield", "Chaffee", "Cheyenne", "Clear Creek", "Conejos", "Costilla", "Crowley", "Custer", "Delta", "Denver", "Dolores", "Douglas", "Eagle", "Elbert", "El Paso", "Fremont", "Garfield", "Gilpin", "Grand", "Gunnison", "Hinsdale", "Huerfano", "Jackson", "Jefferson", "Kiowa", "Kit Carson", "Lake", "La Plata", "Larimer", "Las Animas", "Lincoln", "Logan", "Mesa", "Mineral", "Moffat", "Montezuma", "Montrose", "Morgan", "Otero", "Ouray", "Park", "Phillips", "Pitkin", "Prowers", "Pueblo", "Rio Blanco", "Rio Grande", "Routt", "Saguache", "San Juan", "San Miguel", "Sedgwick", "Summit", "Teller", "Washington", "Weld", "Yuma"),
Connecticut= c("Fairfield", "Hartford", "Litchfield", "Middlesex", "New Haven", "New London", "Tolland", "Windham"),
Delaware= c("Kent", "New Castle", "Sussex"),
Florida= c("Alachua", "Baker", "Bay", "Bradford", "Brevard", "Broward", "Calhoun", "Charlotte", "Citrus", "Clay", "Collier", "Columbia", "DeSoto", "Dixie", "Duval", "Escambia", "Flagler", "Franklin", "Gadsden", "Gilchrist", "Glades", "Gulf", "Hamilton", "Hardee", "Hendry", "Hernando", "Highlands", "Hillsborough", "Holmes", "Indian River", "Jackson", "Jefferson", "Lafayette", "Lake", "Lee", "Leon", "Levy", "Liberty", "Madison", "Manatee", "Marion", "Martin", "Miami-Dade", "Monroe", "Nassau", "Okaloosa", "Okeechobee", "Orange", "Osceola", "Palm Beach", "Pasco", "Pinellas", "Polk", "Putnam", "Santa Rosa", "Sarasota", "Seminole", "St. Johns", "St. Lucie", "Sumter", "Suwannee", "Taylor", "Union", "Volusia", "Wakulla", "Walton", "Washington"),
Georgia = c("Appling", "Atkinson", "Bacon", "Baker", "Baldwin", "Banks", "Barrow", "Bartow", "Ben Hill", "Berrien", "Bibb", "Bleckley", "Brantley", "Brooks", "Bryan", "Bulloch", "Burke", "Butts", "Calhoun", "Camden", "Candler", "Carroll", "Catoosa", "Charlton", "Chatham", "Chattahoochee", "Chattooga", "Cherokee", "Clarke", "Clay", "Clayton", "Clinch", "Cobb", "Coffee", "Colquitt", "Columbia", "Cook", "Coweta", "Crawford", "Crisp", "Dade", "Dawson", "Decatur", "DeKalb", "Dodge", "Dooly", "Dougherty", "Douglas", "Early", "Echols", "Effingham", "Elbert", "Emanuel", "Evans", "Fannin", "Fayette", "Floyd", "Forsyth", "Franklin", "Fulton", "Gilmer", "Glascock", "Glynn", "Gordon", "Grady", "Greene", "Gwinnett", "Habersham", "Hall", "Hancock", "Haralson", "Harris", "Hart", "Heard", "Henry", "Houston", "Irwin", "Jackson", "Jasper", "Jeff Davis", "Jefferson", "Jenkins", "Johnson", "Jones", "Lamar", "Lanier", "Laurens", "Lee", "Liberty", "Lincoln", "Long", "Lowndes", "Lumpkin", "Macon", "Madison", "Marion", "McDuffie", "McIntosh", "Meriwether", "Miller", "Mitchell", "Monroe", "Montgomery", "Morgan", "Murray", "Muscogee", "Newton", "Oconee", "Oglethorpe", "Paulding", "Peach", "Pickens", "Pierce", "Pike", "Polk", "Pulaski", "Putnam", "Quitman", "Rabun", "Randolph", "Richmond", "Rockdale", "Schley", "Screven", "Seminole", "Spalding", "Stephens", "Stewart", "Sumter", "Talbot", "Taliaferro", "Tattnall", "Taylor", "Telfair", "Terrell", "Thomas", "Tift", "Toombs", "Towns", "Treutlen", "Troup", "Turner", "Twiggs", "Union", "Upson", "Walker", "Walton", "Ware", "Warren", "Washington", "Wayne", "Webster", "Wheeler", "White", "Whitfield", "Wilcox", "Wilkes", "Wilkinson", "Worth"),
Hawaii= c("Hawaii", "Honolulu", "Kalawao", "Kauai", "Maui"),
Idaho= c("Ada", "Adams", "Bannock", "Bear Lake", "Benewah", "Bingham", "Blaine", "Boise", "Bonner", "Bonneville", "Boundary", "Butte", "Camas", "Canyon", "Caribou", "Cassia", "Clark", "Clearwater", "Custer", "Elmore", "Franklin", "Fremont", "Gem", "Gooding", "Idaho", "Jefferson", "Jerome", "Kootenai", "Latah", "Lemhi", "Lewis", "Lincoln", "Madison", "Minidoka", "Nez Perce", "Oneida", "Owyhee", "Payette", "Power", "Shoshone", "Teton", "Twin Falls", "Valley", "Washington"),
Illinois= c("Adams", "Alexander", "Bond", "Boone", "Brown", "Bureau", "Calhoun", "Carroll", "Cass", "Champaign", "Christian", "Clark", "Clay", "Clinton", "Coles", "Cook", "Crawford", "Cumberland", "DeKalb", "De Witt", "Douglas", "DuPage", "Edgar", "Edwards", "Effingham", "Fayette", "Ford", "Franklin", "Fulton", "Gallatin", "Greene", "Grundy", "Hamilton", "Hancock", "Hardin", "Henderson", "Henry", "Iroquois", "Jackson", "Jasper", "Jefferson", "Jersey", "Jo Daviess", "Johnson", "Kane", "Kankakee", "Kendall", "Knox", "Lake", "LaSalle", "Lawrence", "Lee", "Livingston", "Logan", "McDonough", "McHenry", "McLean", "Macon", "Macoupin", "Madison", "Marion", "Marshall", "Mason", "Massac", "Menard", "Mercer", "Monroe", "Montgomery", "Morgan", "Moultrie", "Ogle", "Peoria", "Perry", "Piatt", "Pike", "Pope", "Pulaski", "Putnam", "Randolph", "Richland", "Rock Island", "St. Clair", "Saline", "Sangamon", "Schuyler", "Scott", "Shelby", "Stark", "Stephenson", "Tazewell", "Union", "Vermilion", "Wabash", "Warren", "Washington", "Wayne", "White", "Whiteside", "Will", "Williamson", "Winnebago", "Woodford"),
Indiana=c("Adams", "Allen", "Bartholomew", "Benton", "Blackford", "Boone", "Brown", "Carroll", "Cass", "Clark", "Clay", "Clinton", "Crawford", "Daviess", "Dearborn", "Decatur", "DeKalb", "Delaware", "Dubois", "Elkhart", "Fayette", "Floyd", "Fountain", "Franklin", "Fulton", "Gibson", "Grant", "Greene", "Hamilton", "Hancock", "Harrison", "Hendricks", "Henry", "Howard", "Huntington", "Jackson", "Jasper", "Jay", "Jefferson", "Jennings", "Johnson", "Knox", "Kosciusko", "LaGrange", "Lake", "LaPorte", "Lawrence", "Madison", "Marion", "Marshall", "Martin", "Miami", "Monroe", "Montgomery", "Morgan", "Newton", "Noble", "Ohio", "Orange", "Owen", "Parke", "Perry", "Pike", "Porter", "Posey", "Pulaski", "Putnam", "Randolph", "Ripley", "Rush", "St. Joseph", "Scott", "Shelby", "Spencer", "Starke", "Steuben", "Sullivan", "Switzerland", "Tippecanoe", "Tipton", "Union", "Vanderburgh", "Vermillion", "Vigo", "Wabash", "Warren", "Warrick", "Washington", "Wayne", "Wells", "White", "Whitley"),
Iowa= c("Adair", "Adams", "Allamakee", "Appanoose", "Audubon", "Benton", "Black Hawk", "Boone", "Bremer", "Buchanan", "Buena Vista", "Butler", "Calhoun", "Carroll", "Cass", "Cedar", "Cerro Gordo", "Cherokee", "Chickasaw", "Clarke", "Clay", "Clayton", "Clinton", "Crawford", "Dallas", "Davis", "Decatur", "Delaware", "Des Moines", "Dickinson", "Dubuque", "Emmet", "Fayette", "Floyd", "Franklin", "Fremont", "Greene", "Grundy", "Guthrie", "Hamilton", "Hancock", "Hardin", "Harrison", "Henry", "Howard", "Humboldt", "Ida", "Iowa", "Jackson", "Jasper", "Jefferson", "Johnson", "Jones", "Keokuk", "Kossuth", "Lee", "Linn", "Louisa", "Lucas", "Lyon", "Madison", "Mahaska", "Marion", "Marshall", "Mills", "Mitchell", "Monona", "Monroe", "Montgomery", "Muscatine", "O'Brien", "Osceola", "Page", "Palo Alto", "Plymouth", "Pocahontas", "Polk", "Pottawattamie", "Poweshiek", "Ringgold", "Sac", "Scott", "Shelby", "Sioux", "Story", "Tama", "Taylor", "Union", "Van Buren", "Wapello", "Warren", "Washington", "Wayne", "Webster", "Winnebago", "Winneshiek", "Woodbury", "Worth", "Wright"),
)
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/",
California_url <- "https://www.redfin.com/county/303/CA/",
Colorado_url <- "https://www.redfin.com/county/361/CO/",
Connecticut_url <- "https://www.redfin.com/county/425/CT/",
Delaware_url <- "https://www.redfin.com/county/433/DE/",
Florida_url <- "https://www.redfin.com/county/437/FL/",
Georgia_url <- "https://www.redfin.com/county/504/GA/",
Hawaii_url <- "https://www.redfin.com/county/663/HI/",
Idaho_url <- "https://www.redfin.com/county/692/ID/",
Illinois_url <- "https://www.redfin.com/county/813/IL/",
Indiana_url <- "https://www.redfin.com/county/850/IN/",
Iowa_url <- "https://www.redfin.com/county/909/IA/"
)
state_counties <- list(
Alaska = c("Aleutians East Borough", "Aleutians West Census Area", "Anchorage Municipality", "Bethel Census Area", "Bristol Bay Borough", "Chugach Census Area1", "Copper River Census Area1", "Denali Borough", "Dillingham Census Area", "Fairbanks North Star Borough", "Haines Borough", "Hoonah-Angoon Census Area", "Juneau City and Borough", "Kenai Peninsula Borough", "Ketchikan Gateway Borough", "Kodiak Island Borough", "Kusilvak Census Area", "Lake and Peninsula Borough", "Matanuska-Susitna Borough", "Nome Census Area", "North Slope Borough", "Northwest Arctic Borough", "Petersburg Borough", "Prince of Wales-Hyder Census Area", "Sitka City and Borough", "Skagway Municipality", "Southeast Fairbanks Census Area", "Valdez-Cordova Census Area1", "Wrangell City and Borough", "Yakutat City and Borough", "Yukon-Koyukuk Census Area"),
Arizona = c("Apache", "Cochise", "Coconino", "Gila", "Graham", "Greenlee", "La Paz", "Maricopa", "Mohave", "Navajo", "Pima", "Pinal", "Santa Cruz", "Yavapai", "Yuma"),
Arkansas = c("Arkansas", "Ashley", "Baxter", "Benton", "Boone", "Bradley", "Calhoun", "Carroll", "Chicot", "Clark", "Clay", "Cleburne", "Cleveland", "Columbia", "Conway", "Craighead", "Crawford", "Crittenden", "Cross", "Dallas", "Des"),
California= c("Alameda", "Alpine", "Amador", "Butte", "Calaveras", "Colusa", "Contra Costa", "Del Norte", "El Dorado", "Fresno", "Glenn", "Humboldt", "Imperial", "Inyo", "Kern", "Kings", "Lake", "Lassen", "Los Angeles", "Madera", "Marin", "Mariposa", "Mendocino", "Merced", "Modoc", "Mono", "Monterey", "Napa", "Nevada", "Orange", "Placer", "Plumas", "Riverside", "Sacramento", "San Benito", "San Bernardino", "San Diego", "San Francisco", "San Joaquin", "San Luis Obispo", "San Mateo", "Santa Barbara", "Santa Clara", "Santa Cruz", "Shasta", "Sierra", "Siskiyou", "Solano", "Sonoma", "Stanislaus", "Sutter", "Tehama", "Trinity", "Tulare", "Tuolumne", "Ventura", "Yolo", "Yuba"),
Colorado= c("Adams", "Alamosa", "Arapahoe", "Archuleta", "Baca", "Bent", "Boulder", "Broomfield", "Chaffee", "Cheyenne", "Clear Creek", "Conejos", "Costilla", "Crowley", "Custer", "Delta", "Denver", "Dolores", "Douglas", "Eagle", "Elbert", "El Paso", "Fremont", "Garfield", "Gilpin", "Grand", "Gunnison", "Hinsdale", "Huerfano", "Jackson", "Jefferson", "Kiowa", "Kit Carson", "Lake", "La Plata", "Larimer", "Las Animas", "Lincoln", "Logan", "Mesa", "Mineral", "Moffat", "Montezuma", "Montrose", "Morgan", "Otero", "Ouray", "Park", "Phillips", "Pitkin", "Prowers", "Pueblo", "Rio Blanco", "Rio Grande", "Routt", "Saguache", "San Juan", "San Miguel", "Sedgwick", "Summit", "Teller", "Washington", "Weld", "Yuma"),
Connecticut= c("Fairfield", "Hartford", "Litchfield", "Middlesex", "New Haven", "New London", "Tolland", "Windham"),
Delaware= c("Kent", "New Castle", "Sussex"),
Florida= c("Alachua", "Baker", "Bay", "Bradford", "Brevard", "Broward", "Calhoun", "Charlotte", "Citrus", "Clay", "Collier", "Columbia", "DeSoto", "Dixie", "Duval", "Escambia", "Flagler", "Franklin", "Gadsden", "Gilchrist", "Glades", "Gulf", "Hamilton", "Hardee", "Hendry", "Hernando", "Highlands", "Hillsborough", "Holmes", "Indian River", "Jackson", "Jefferson", "Lafayette", "Lake", "Lee", "Leon", "Levy", "Liberty", "Madison", "Manatee", "Marion", "Martin", "Miami-Dade", "Monroe", "Nassau", "Okaloosa", "Okeechobee", "Orange", "Osceola", "Palm Beach", "Pasco", "Pinellas", "Polk", "Putnam", "Santa Rosa", "Sarasota", "Seminole", "St. Johns", "St. Lucie", "Sumter", "Suwannee", "Taylor", "Union", "Volusia", "Wakulla", "Walton", "Washington"),
Georgia = c("Appling", "Atkinson", "Bacon", "Baker", "Baldwin", "Banks", "Barrow", "Bartow", "Ben Hill", "Berrien", "Bibb", "Bleckley", "Brantley", "Brooks", "Bryan", "Bulloch", "Burke", "Butts", "Calhoun", "Camden", "Candler", "Carroll", "Catoosa", "Charlton", "Chatham", "Chattahoochee", "Chattooga", "Cherokee", "Clarke", "Clay", "Clayton", "Clinch", "Cobb", "Coffee", "Colquitt", "Columbia", "Cook", "Coweta", "Crawford", "Crisp", "Dade", "Dawson", "Decatur", "DeKalb", "Dodge", "Dooly", "Dougherty", "Douglas", "Early", "Echols", "Effingham", "Elbert", "Emanuel", "Evans", "Fannin", "Fayette", "Floyd", "Forsyth", "Franklin", "Fulton", "Gilmer", "Glascock", "Glynn", "Gordon", "Grady", "Greene", "Gwinnett", "Habersham", "Hall", "Hancock", "Haralson", "Harris", "Hart", "Heard", "Henry", "Houston", "Irwin", "Jackson", "Jasper", "Jeff Davis", "Jefferson", "Jenkins", "Johnson", "Jones", "Lamar", "Lanier", "Laurens", "Lee", "Liberty", "Lincoln", "Long", "Lowndes", "Lumpkin", "Macon", "Madison", "Marion", "McDuffie", "McIntosh", "Meriwether", "Miller", "Mitchell", "Monroe", "Montgomery", "Morgan", "Murray", "Muscogee", "Newton", "Oconee", "Oglethorpe", "Paulding", "Peach", "Pickens", "Pierce", "Pike", "Polk", "Pulaski", "Putnam", "Quitman", "Rabun", "Randolph", "Richmond", "Rockdale", "Schley", "Screven", "Seminole", "Spalding", "Stephens", "Stewart", "Sumter", "Talbot", "Taliaferro", "Tattnall", "Taylor", "Telfair", "Terrell", "Thomas", "Tift", "Toombs", "Towns", "Treutlen", "Troup", "Turner", "Twiggs", "Union", "Upson", "Walker", "Walton", "Ware", "Warren", "Washington", "Wayne", "Webster", "Wheeler", "White", "Whitfield", "Wilcox", "Wilkes", "Wilkinson", "Worth"),
Hawaii= c("Hawaii", "Honolulu", "Kalawao", "Kauai", "Maui"),
Idaho= c("Ada", "Adams", "Bannock", "Bear Lake", "Benewah", "Bingham", "Blaine", "Boise", "Bonner", "Bonneville", "Boundary", "Butte", "Camas", "Canyon", "Caribou", "Cassia", "Clark", "Clearwater", "Custer", "Elmore", "Franklin", "Fremont", "Gem", "Gooding", "Idaho", "Jefferson", "Jerome", "Kootenai", "Latah", "Lemhi", "Lewis", "Lincoln", "Madison", "Minidoka", "Nez Perce", "Oneida", "Owyhee", "Payette", "Power", "Shoshone", "Teton", "Twin Falls", "Valley", "Washington"),
Illinois= c("Adams", "Alexander", "Bond", "Boone", "Brown", "Bureau", "Calhoun", "Carroll", "Cass", "Champaign", "Christian", "Clark", "Clay", "Clinton", "Coles", "Cook", "Crawford", "Cumberland", "DeKalb", "De Witt", "Douglas", "DuPage", "Edgar", "Edwards", "Effingham", "Fayette", "Ford", "Franklin", "Fulton", "Gallatin", "Greene", "Grundy", "Hamilton", "Hancock", "Hardin", "Henderson", "Henry", "Iroquois", "Jackson", "Jasper", "Jefferson", "Jersey", "Jo Daviess", "Johnson", "Kane", "Kankakee", "Kendall", "Knox", "Lake", "LaSalle", "Lawrence", "Lee", "Livingston", "Logan", "McDonough", "McHenry", "McLean", "Macon", "Macoupin", "Madison", "Marion", "Marshall", "Mason", "Massac", "Menard", "Mercer", "Monroe", "Montgomery", "Morgan", "Moultrie", "Ogle", "Peoria", "Perry", "Piatt", "Pike", "Pope", "Pulaski", "Putnam", "Randolph", "Richland", "Rock Island", "St. Clair", "Saline", "Sangamon", "Schuyler", "Scott", "Shelby", "Stark", "Stephenson", "Tazewell", "Union", "Vermilion", "Wabash", "Warren", "Washington", "Wayne", "White", "Whiteside", "Will", "Williamson", "Winnebago", "Woodford"),
Indiana=c("Adams", "Allen", "Bartholomew", "Benton", "Blackford", "Boone", "Brown", "Carroll", "Cass", "Clark", "Clay", "Clinton", "Crawford", "Daviess", "Dearborn", "Decatur", "DeKalb", "Delaware", "Dubois", "Elkhart", "Fayette", "Floyd", "Fountain", "Franklin", "Fulton", "Gibson", "Grant", "Greene", "Hamilton", "Hancock", "Harrison", "Hendricks", "Henry", "Howard", "Huntington", "Jackson", "Jasper", "Jay", "Jefferson", "Jennings", "Johnson", "Knox", "Kosciusko", "LaGrange", "Lake", "LaPorte", "Lawrence", "Madison", "Marion", "Marshall", "Martin", "Miami", "Monroe", "Montgomery", "Morgan", "Newton", "Noble", "Ohio", "Orange", "Owen", "Parke", "Perry", "Pike", "Porter", "Posey", "Pulaski", "Putnam", "Randolph", "Ripley", "Rush", "St. Joseph", "Scott", "Shelby", "Spencer", "Starke", "Steuben", "Sullivan", "Switzerland", "Tippecanoe", "Tipton", "Union", "Vanderburgh", "Vermillion", "Vigo", "Wabash", "Warren", "Warrick", "Washington", "Wayne", "Wells", "White", "Whitley"),
Iowa= c("Adair", "Adams", "Allamakee", "Appanoose", "Audubon", "Benton", "Black Hawk", "Boone", "Bremer", "Buchanan", "Buena Vista", "Butler", "Calhoun", "Carroll", "Cass", "Cedar", "Cerro Gordo", "Cherokee", "Chickasaw", "Clarke", "Clay", "Clayton", "Clinton", "Crawford", "Dallas", "Davis", "Decatur", "Delaware", "Des Moines", "Dickinson", "Dubuque", "Emmet", "Fayette", "Floyd", "Franklin", "Fremont", "Greene", "Grundy", "Guthrie", "Hamilton", "Hancock", "Hardin", "Harrison", "Henry", "Howard", "Humboldt", "Ida", "Iowa", "Jackson", "Jasper", "Jefferson", "Johnson", "Jones", "Keokuk", "Kossuth", "Lee", "Linn", "Louisa", "Lucas", "Lyon", "Madison", "Mahaska", "Marion", "Marshall", "Mills", "Mitchell", "Monona", "Monroe", "Montgomery", "Muscatine", "O'Brien", "Osceola", "Page", "Palo Alto", "Plymouth", "Pocahontas", "Polk", "Pottawattamie", "Poweshiek", "Ringgold", "Sac", "Scott", "Shelby", "Sioux", "Story", "Tama", "Taylor", "Union", "Van Buren", "Wapello", "Warren", "Washington", "Wayne", "Webster", "Winnebago", "Winneshiek", "Woodbury", "Worth", "Wright")
)
state_names <- names(state_urls)
all_data <- list()
for (state_index in 1:length(state_names)) {
state_data <- data.frame()
for (county_name in state_counties[[state_index]]) {
county_url_name <- gsub(" ", "-", county_name)
url <- paste0(state_urls[[state_names[state_index]]], county_url_name, "/filter/min-beds=2,max-beds=2,min-baths=1")
webpage <- tryCatch(
{
read_html(url)
},
error = function(e) {
return(NULL)
}
)
if (is.null(webpage)) {
next
}
# Extract price info
price_info <- webpage %>%
html_nodes(xpath = '//*[contains(@id, "MapHomeCard_")]/div/div/div[2]') %>%
html_text()
# Extract county name
county <- rep(county_name, length(price_info))
# Extract state name
state <- rep(state_names[state_index], length(price_info))
# Create a data frame
county_data <- data.frame(State = state, County = county, Price_Info = price_info)
state_data <- rbind(state_data, county_data)
}
all_data[[state_names[state_index]]] <- state_data
}
final_data <- do.call(rbind, all_data)
View(final_data)
state_names <- names(state_urls)
all_data <- data.frame()
for (state_index in 1:length(state_names)) {
state_data <- data.frame()
for (county_name in state_counties[[state_index]]) {
county_url_name <- gsub(" ", "-", county_name)
url <- paste0(state_urls[[state_names[state_index]]], county_url_name, "/filter/min-beds=2,max-beds=2,min-baths=1")
webpage <- tryCatch(
{
read_html(url)
},
error = function(e) {
return(NULL)
}
)
if (is.null(webpage)) {
next
}
# Extract price info
price_info <- webpage %>%
html_nodes(xpath = '//*[contains(@id, "MapHomeCard_")]/div/div/div[2]') %>%
html_text()
# Extract county name
county <- rep(county_name, length(price_info))
# Extract state name
state <- rep(state_names[state_index], length(price_info))
# Create a data frame
county_data <- data.frame(State = state, County = county, Price_Info = price_info)
state_data <- rbind(state_data, county_data)
}
all_data[[state_names[state_index]]] <- state_data
}
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/",
California_url <- "https://www.redfin.com/county/303/CA/",
Colorado_url <- "https://www.redfin.com/county/361/CO/",
Connecticut_url <- "https://www.redfin.com/county/425/CT/",
Delaware_url <- "https://www.redfin.com/county/433/DE/",
Florida_url <- "https://www.redfin.com/county/437/FL/",
Georgia_url <- "https://www.redfin.com/county/504/GA/",
Hawaii_url <- "https://www.redfin.com/county/663/HI/",
Idaho_url <- "https://www.redfin.com/county/692/ID/",
Illinois_url <- "https://www.redfin.com/county/813/IL/",
Indiana_url <- "https://www.redfin.com/county/850/IN/",
Iowa_url <- "https://www.redfin.com/county/909/IA/"
)
state_counties <- list(
Alaska = c("Aleutians East Borough", "Aleutians West Census Area", "Anchorage Municipality", "Bethel Census Area", "Bristol Bay Borough", "Chugach Census Area1", "Copper River Census Area1", "Denali Borough", "Dillingham Census Area", "Fairbanks North Star Borough", "Haines Borough", "Hoonah-Angoon Census Area", "Juneau City and Borough", "Kenai Peninsula Borough", "Ketchikan Gateway Borough", "Kodiak Island Borough", "Kusilvak Census Area", "Lake and Peninsula Borough", "Matanuska-Susitna Borough", "Nome Census Area", "North Slope Borough", "Northwest Arctic Borough", "Petersburg Borough", "Prince of Wales-Hyder Census Area", "Sitka City and Borough", "Skagway Municipality", "Southeast Fairbanks Census Area", "Valdez-Cordova Census Area1", "Wrangell City and Borough", "Yakutat City and Borough", "Yukon-Koyukuk Census Area"),
Arizona = c("Apache", "Cochise", "Coconino", "Gila", "Graham", "Greenlee", "La Paz", "Maricopa", "Mohave", "Navajo", "Pima", "Pinal", "Santa Cruz", "Yavapai", "Yuma"),
Arkansas = c("Arkansas", "Ashley", "Baxter", "Benton", "Boone", "Bradley", "Calhoun", "Carroll", "Chicot", "Clark", "Clay", "Cleburne", "Cleveland", "Columbia", "Conway", "Craighead", "Crawford", "Crittenden", "Cross", "Dallas", "Des"),
California= c("Alameda", "Alpine", "Amador", "Butte", "Calaveras", "Colusa", "Contra Costa", "Del Norte", "El Dorado", "Fresno", "Glenn", "Humboldt", "Imperial", "Inyo", "Kern", "Kings", "Lake", "Lassen", "Los Angeles", "Madera", "Marin", "Mariposa", "Mendocino", "Merced", "Modoc", "Mono", "Monterey", "Napa", "Nevada", "Orange", "Placer", "Plumas", "Riverside", "Sacramento", "San Benito", "San Bernardino", "San Diego", "San Francisco", "San Joaquin", "San Luis Obispo", "San Mateo", "Santa Barbara", "Santa Clara", "Santa Cruz", "Shasta", "Sierra", "Siskiyou", "Solano", "Sonoma", "Stanislaus", "Sutter", "Tehama", "Trinity", "Tulare", "Tuolumne", "Ventura", "Yolo", "Yuba"),
Colorado= c("Adams", "Alamosa", "Arapahoe", "Archuleta", "Baca", "Bent", "Boulder", "Broomfield", "Chaffee", "Cheyenne", "Clear Creek", "Conejos", "Costilla", "Crowley", "Custer", "Delta", "Denver", "Dolores", "Douglas", "Eagle", "Elbert", "El Paso", "Fremont", "Garfield", "Gilpin", "Grand", "Gunnison", "Hinsdale", "Huerfano", "Jackson", "Jefferson", "Kiowa", "Kit Carson", "Lake", "La Plata", "Larimer", "Las Animas", "Lincoln", "Logan", "Mesa", "Mineral", "Moffat", "Montezuma", "Montrose", "Morgan", "Otero", "Ouray", "Park", "Phillips", "Pitkin", "Prowers", "Pueblo", "Rio Blanco", "Rio Grande", "Routt", "Saguache", "San Juan", "San Miguel", "Sedgwick", "Summit", "Teller", "Washington", "Weld", "Yuma"),
Connecticut= c("Fairfield", "Hartford", "Litchfield", "Middlesex", "New Haven", "New London", "Tolland", "Windham"),
Delaware= c("Kent", "New Castle", "Sussex"),
Florida= c("Alachua", "Baker", "Bay", "Bradford", "Brevard", "Broward", "Calhoun", "Charlotte", "Citrus", "Clay", "Collier", "Columbia", "DeSoto", "Dixie", "Duval", "Escambia", "Flagler", "Franklin", "Gadsden", "Gilchrist", "Glades", "Gulf", "Hamilton", "Hardee", "Hendry", "Hernando", "Highlands", "Hillsborough", "Holmes", "Indian River", "Jackson", "Jefferson", "Lafayette", "Lake", "Lee", "Leon", "Levy", "Liberty", "Madison", "Manatee", "Marion", "Martin", "Miami-Dade", "Monroe", "Nassau", "Okaloosa", "Okeechobee", "Orange", "Osceola", "Palm Beach", "Pasco", "Pinellas", "Polk", "Putnam", "Santa Rosa", "Sarasota", "Seminole", "St. Johns", "St. Lucie", "Sumter", "Suwannee", "Taylor", "Union", "Volusia", "Wakulla", "Walton", "Washington"),
Georgia = c("Appling", "Atkinson", "Bacon", "Baker", "Baldwin", "Banks", "Barrow", "Bartow", "Ben Hill", "Berrien", "Bibb", "Bleckley", "Brantley", "Brooks", "Bryan", "Bulloch", "Burke", "Butts", "Calhoun", "Camden", "Candler", "Carroll", "Catoosa", "Charlton", "Chatham", "Chattahoochee", "Chattooga", "Cherokee", "Clarke", "Clay", "Clayton", "Clinch", "Cobb", "Coffee", "Colquitt", "Columbia", "Cook", "Coweta", "Crawford", "Crisp", "Dade", "Dawson", "Decatur", "DeKalb", "Dodge", "Dooly", "Dougherty", "Douglas", "Early", "Echols", "Effingham", "Elbert", "Emanuel", "Evans", "Fannin", "Fayette", "Floyd", "Forsyth", "Franklin", "Fulton", "Gilmer", "Glascock", "Glynn", "Gordon", "Grady", "Greene", "Gwinnett", "Habersham", "Hall", "Hancock", "Haralson", "Harris", "Hart", "Heard", "Henry", "Houston", "Irwin", "Jackson", "Jasper", "Jeff Davis", "Jefferson", "Jenkins", "Johnson", "Jones", "Lamar", "Lanier", "Laurens", "Lee", "Liberty", "Lincoln", "Long", "Lowndes", "Lumpkin", "Macon", "Madison", "Marion", "McDuffie", "McIntosh", "Meriwether", "Miller", "Mitchell", "Monroe", "Montgomery", "Morgan", "Murray", "Muscogee", "Newton", "Oconee", "Oglethorpe", "Paulding", "Peach", "Pickens", "Pierce", "Pike", "Polk", "Pulaski", "Putnam", "Quitman", "Rabun", "Randolph", "Richmond", "Rockdale", "Schley", "Screven", "Seminole", "Spalding", "Stephens", "Stewart", "Sumter", "Talbot", "Taliaferro", "Tattnall", "Taylor", "Telfair", "Terrell", "Thomas", "Tift", "Toombs", "Towns", "Treutlen", "Troup", "Turner", "Twiggs", "Union", "Upson", "Walker", "Walton", "Ware", "Warren", "Washington", "Wayne", "Webster", "Wheeler", "White", "Whitfield", "Wilcox", "Wilkes", "Wilkinson", "Worth"),
Hawaii= c("Hawaii", "Honolulu", "Kalawao", "Kauai", "Maui"),
Idaho= c("Ada", "Adams", "Bannock", "Bear Lake", "Benewah", "Bingham", "Blaine", "Boise", "Bonner", "Bonneville", "Boundary", "Butte", "Camas", "Canyon", "Caribou", "Cassia", "Clark", "Clearwater", "Custer", "Elmore", "Franklin", "Fremont", "Gem", "Gooding", "Idaho", "Jefferson", "Jerome", "Kootenai", "Latah", "Lemhi", "Lewis", "Lincoln", "Madison", "Minidoka", "Nez Perce", "Oneida", "Owyhee", "Payette", "Power", "Shoshone", "Teton", "Twin Falls", "Valley", "Washington"),
Illinois= c("Adams", "Alexander", "Bond", "Boone", "Brown", "Bureau", "Calhoun", "Carroll", "Cass", "Champaign", "Christian", "Clark", "Clay", "Clinton", "Coles", "Cook", "Crawford", "Cumberland", "DeKalb", "De Witt", "Douglas", "DuPage", "Edgar", "Edwards", "Effingham", "Fayette", "Ford", "Franklin", "Fulton", "Gallatin", "Greene", "Grundy", "Hamilton", "Hancock", "Hardin", "Henderson", "Henry", "Iroquois", "Jackson", "Jasper", "Jefferson", "Jersey", "Jo Daviess", "Johnson", "Kane", "Kankakee", "Kendall", "Knox", "Lake", "LaSalle", "Lawrence", "Lee", "Livingston", "Logan", "McDonough", "McHenry", "McLean", "Macon", "Macoupin", "Madison", "Marion", "Marshall", "Mason", "Massac", "Menard", "Mercer", "Monroe", "Montgomery", "Morgan", "Moultrie", "Ogle", "Peoria", "Perry", "Piatt", "Pike", "Pope", "Pulaski", "Putnam", "Randolph", "Richland", "Rock Island", "St. Clair", "Saline", "Sangamon", "Schuyler", "Scott", "Shelby", "Stark", "Stephenson", "Tazewell", "Union", "Vermilion", "Wabash", "Warren", "Washington", "Wayne", "White", "Whiteside", "Will", "Williamson", "Winnebago", "Woodford"),
Indiana=c("Adams", "Allen", "Bartholomew", "Benton", "Blackford", "Boone", "Brown", "Carroll", "Cass", "Clark", "Clay", "Clinton", "Crawford", "Daviess", "Dearborn", "Decatur", "DeKalb", "Delaware", "Dubois", "Elkhart", "Fayette", "Floyd", "Fountain", "Franklin", "Fulton", "Gibson", "Grant", "Greene", "Hamilton", "Hancock", "Harrison", "Hendricks", "Henry", "Howard", "Huntington", "Jackson", "Jasper", "Jay", "Jefferson", "Jennings", "Johnson", "Knox", "Kosciusko", "LaGrange", "Lake", "LaPorte", "Lawrence", "Madison", "Marion", "Marshall", "Martin", "Miami", "Monroe", "Montgomery", "Morgan", "Newton", "Noble", "Ohio", "Orange", "Owen", "Parke", "Perry", "Pike", "Porter", "Posey", "Pulaski", "Putnam", "Randolph", "Ripley", "Rush", "St. Joseph", "Scott", "Shelby", "Spencer", "Starke", "Steuben", "Sullivan", "Switzerland", "Tippecanoe", "Tipton", "Union", "Vanderburgh", "Vermillion", "Vigo", "Wabash", "Warren", "Warrick", "Washington", "Wayne", "Wells", "White", "Whitley"),
Iowa= c("Adair", "Adams", "Allamakee", "Appanoose", "Audubon", "Benton", "Black Hawk", "Boone", "Bremer", "Buchanan", "Buena Vista", "Butler", "Calhoun", "Carroll", "Cass", "Cedar", "Cerro Gordo", "Cherokee", "Chickasaw", "Clarke", "Clay", "Clayton", "Clinton", "Crawford", "Dallas", "Davis", "Decatur", "Delaware", "Des Moines", "Dickinson", "Dubuque", "Emmet", "Fayette", "Floyd", "Franklin", "Fremont", "Greene", "Grundy", "Guthrie", "Hamilton", "Hancock", "Hardin", "Harrison", "Henry", "Howard", "Humboldt", "Ida", "Iowa", "Jackson", "Jasper", "Jefferson", "Johnson", "Jones", "Keokuk", "Kossuth", "Lee", "Linn", "Louisa", "Lucas", "Lyon", "Madison", "Mahaska", "Marion", "Marshall", "Mills", "Mitchell", "Monona", "Monroe", "Montgomery", "Muscatine", "O'Brien", "Osceola", "Page", "Palo Alto", "Plymouth", "Pocahontas", "Polk", "Pottawattamie", "Poweshiek", "Ringgold", "Sac", "Scott", "Shelby", "Sioux", "Story", "Tama", "Taylor", "Union", "Van Buren", "Wapello", "Warren", "Washington", "Wayne", "Webster", "Winnebago", "Winneshiek", "Woodbury", "Worth", "Wright")
)
state_names <- names(state_urls)
all_data <- data.frame()
for (state_index in 1:length(state_names)) {
state_data <- data.frame()
for (county_name in state_counties[[state_index]]) {
county_url_name <- gsub(" ", "-", county_name)
url <- paste0(state_urls[[state_names[state_index]]], county_url_name, "/filter/min-beds=2,max-beds=2,min-baths=1")
webpage <- tryCatch(
{
read_html(url)
},
error = function(e) {
return(NULL)
}
)
if (is.null(webpage)) {
next
}
# Extract price info
price_info <- webpage %>%
html_nodes(xpath = '//*[contains(@id, "MapHomeCard_")]/div/div/div[2]') %>%
html_text()
# Extract county name
county <- rep(county_name, length(price_info))
# Extract state name
state <- rep(state_names[state_index], length(price_info))
# Create a data frame
county_data <- data.frame(State = state, County = county, Price_Info = price_info)
state_data <- rbind(state_data, county_data)
}
all_data <- rbind(all_data, state_data)
}
final_data <- all_data
print(state_names)
state_urls <- list(
Alaska_url = "https://www.redfin.com/county/191/AK/",
Arizona_url = "https://www.redfin.com/county/213/AZ/",
Arkansas_url= "https://www.redfin.com/county/228/AR/",
California_url= "https://www.redfin.com/county/303/CA/",
Colorado_url = "https://www.redfin.com/county/361/CO/",
Connecticut_url = "https://www.redfin.com/county/425/CT/",
Delaware_url = "https://www.redfin.com/county/433/DE/",
Florida_url = "https://www.redfin.com/county/437/FL/",
Georgia_url = "https://www.redfin.com/county/504/GA/",
Hawaii_url = "https://www.redfin.com/county/663/HI/",
Idaho_url = "https://www.redfin.com/county/692/ID/",
Illinois_url = "https://www.redfin.com/county/813/IL/",
Indiana_url = "https://www.redfin.com/county/850/IN/",
Iowa_url = "https://www.redfin.com/county/909/IA/"
)
state_counties <- list(
Alaska = c("Aleutians East Borough", "Aleutians West Census Area", "Anchorage Municipality", "Bethel Census Area", "Bristol Bay Borough", "Chugach Census Area1", "Copper River Census Area1", "Denali Borough", "Dillingham Census Area", "Fairbanks North Star Borough", "Haines Borough", "Hoonah-Angoon Census Area", "Juneau City and Borough", "Kenai Peninsula Borough", "Ketchikan Gateway Borough", "Kodiak Island Borough", "Kusilvak Census Area", "Lake and Peninsula Borough", "Matanuska-Susitna Borough", "Nome Census Area", "North Slope Borough", "Northwest Arctic Borough", "Petersburg Borough", "Prince of Wales-Hyder Census Area", "Sitka City and Borough", "Skagway Municipality", "Southeast Fairbanks Census Area", "Valdez-Cordova Census Area1", "Wrangell City and Borough", "Yakutat City and Borough", "Yukon-Koyukuk Census Area"),
Arizona = c("Apache", "Cochise", "Coconino", "Gila", "Graham", "Greenlee", "La Paz", "Maricopa", "Mohave", "Navajo", "Pima", "Pinal", "Santa Cruz", "Yavapai", "Yuma"),
Arkansas = c("Arkansas", "Ashley", "Baxter", "Benton", "Boone", "Bradley", "Calhoun", "Carroll", "Chicot", "Clark", "Clay", "Cleburne", "Cleveland", "Columbia", "Conway", "Craighead", "Crawford", "Crittenden", "Cross", "Dallas", "Des"),
California= c("Alameda", "Alpine", "Amador", "Butte", "Calaveras", "Colusa", "Contra Costa", "Del Norte", "El Dorado", "Fresno", "Glenn", "Humboldt", "Imperial", "Inyo", "Kern", "Kings", "Lake", "Lassen", "Los Angeles", "Madera", "Marin", "Mariposa", "Mendocino", "Merced", "Modoc", "Mono", "Monterey", "Napa", "Nevada", "Orange", "Placer", "Plumas", "Riverside", "Sacramento", "San Benito", "San Bernardino", "San Diego", "San Francisco", "San Joaquin", "San Luis Obispo", "San Mateo", "Santa Barbara", "Santa Clara", "Santa Cruz", "Shasta", "Sierra", "Siskiyou", "Solano", "Sonoma", "Stanislaus", "Sutter", "Tehama", "Trinity", "Tulare", "Tuolumne", "Ventura", "Yolo", "Yuba"),
Colorado= c("Adams", "Alamosa", "Arapahoe", "Archuleta", "Baca", "Bent", "Boulder", "Broomfield", "Chaffee", "Cheyenne", "Clear Creek", "Conejos", "Costilla", "Crowley", "Custer", "Delta", "Denver", "Dolores", "Douglas", "Eagle", "Elbert", "El Paso", "Fremont", "Garfield", "Gilpin", "Grand", "Gunnison", "Hinsdale", "Huerfano", "Jackson", "Jefferson", "Kiowa", "Kit Carson", "Lake", "La Plata", "Larimer", "Las Animas", "Lincoln", "Logan", "Mesa", "Mineral", "Moffat", "Montezuma", "Montrose", "Morgan", "Otero", "Ouray", "Park", "Phillips", "Pitkin", "Prowers", "Pueblo", "Rio Blanco", "Rio Grande", "Routt", "Saguache", "San Juan", "San Miguel", "Sedgwick", "Summit", "Teller", "Washington", "Weld", "Yuma"),
Connecticut= c("Fairfield", "Hartford", "Litchfield", "Middlesex", "New Haven", "New London", "Tolland", "Windham"),
Delaware= c("Kent", "New Castle", "Sussex"),
Florida= c("Alachua", "Baker", "Bay", "Bradford", "Brevard", "Broward", "Calhoun", "Charlotte", "Citrus", "Clay", "Collier", "Columbia", "DeSoto", "Dixie", "Duval", "Escambia", "Flagler", "Franklin", "Gadsden", "Gilchrist", "Glades", "Gulf", "Hamilton", "Hardee", "Hendry", "Hernando", "Highlands", "Hillsborough", "Holmes", "Indian River", "Jackson", "Jefferson", "Lafayette", "Lake", "Lee", "Leon", "Levy", "Liberty", "Madison", "Manatee", "Marion", "Martin", "Miami-Dade", "Monroe", "Nassau", "Okaloosa", "Okeechobee", "Orange", "Osceola", "Palm Beach", "Pasco", "Pinellas", "Polk", "Putnam", "Santa Rosa", "Sarasota", "Seminole", "St. Johns", "St. Lucie", "Sumter", "Suwannee", "Taylor", "Union", "Volusia", "Wakulla", "Walton", "Washington"),
Georgia = c("Appling", "Atkinson", "Bacon", "Baker", "Baldwin", "Banks", "Barrow", "Bartow", "Ben Hill", "Berrien", "Bibb", "Bleckley", "Brantley", "Brooks", "Bryan", "Bulloch", "Burke", "Butts", "Calhoun", "Camden", "Candler", "Carroll", "Catoosa", "Charlton", "Chatham", "Chattahoochee", "Chattooga", "Cherokee", "Clarke", "Clay", "Clayton", "Clinch", "Cobb", "Coffee", "Colquitt", "Columbia", "Cook", "Coweta", "Crawford", "Crisp", "Dade", "Dawson", "Decatur", "DeKalb", "Dodge", "Dooly", "Dougherty", "Douglas", "Early", "Echols", "Effingham", "Elbert", "Emanuel", "Evans", "Fannin", "Fayette", "Floyd", "Forsyth", "Franklin", "Fulton", "Gilmer", "Glascock", "Glynn", "Gordon", "Grady", "Greene", "Gwinnett", "Habersham", "Hall", "Hancock", "Haralson", "Harris", "Hart", "Heard", "Henry", "Houston", "Irwin", "Jackson", "Jasper", "Jeff Davis", "Jefferson", "Jenkins", "Johnson", "Jones", "Lamar", "Lanier", "Laurens", "Lee", "Liberty", "Lincoln", "Long", "Lowndes", "Lumpkin", "Macon", "Madison", "Marion", "McDuffie", "McIntosh", "Meriwether", "Miller", "Mitchell", "Monroe", "Montgomery", "Morgan", "Murray", "Muscogee", "Newton", "Oconee", "Oglethorpe", "Paulding", "Peach", "Pickens", "Pierce", "Pike", "Polk", "Pulaski", "Putnam", "Quitman", "Rabun", "Randolph", "Richmond", "Rockdale", "Schley", "Screven", "Seminole", "Spalding", "Stephens", "Stewart", "Sumter", "Talbot", "Taliaferro", "Tattnall", "Taylor", "Telfair", "Terrell", "Thomas", "Tift", "Toombs", "Towns", "Treutlen", "Troup", "Turner", "Twiggs", "Union", "Upson", "Walker", "Walton", "Ware", "Warren", "Washington", "Wayne", "Webster", "Wheeler", "White", "Whitfield", "Wilcox", "Wilkes", "Wilkinson", "Worth"),
Hawaii= c("Hawaii", "Honolulu", "Kalawao", "Kauai", "Maui"),
Idaho= c("Ada", "Adams", "Bannock", "Bear Lake", "Benewah", "Bingham", "Blaine", "Boise", "Bonner", "Bonneville", "Boundary", "Butte", "Camas", "Canyon", "Caribou", "Cassia", "Clark", "Clearwater", "Custer", "Elmore", "Franklin", "Fremont", "Gem", "Gooding", "Idaho", "Jefferson", "Jerome", "Kootenai", "Latah", "Lemhi", "Lewis", "Lincoln", "Madison", "Minidoka", "Nez Perce", "Oneida", "Owyhee", "Payette", "Power", "Shoshone", "Teton", "Twin Falls", "Valley", "Washington"),
Illinois= c("Adams", "Alexander", "Bond", "Boone", "Brown", "Bureau", "Calhoun", "Carroll", "Cass", "Champaign", "Christian", "Clark", "Clay", "Clinton", "Coles", "Cook", "Crawford", "Cumberland", "DeKalb", "De Witt", "Douglas", "DuPage", "Edgar", "Edwards", "Effingham", "Fayette", "Ford", "Franklin", "Fulton", "Gallatin", "Greene", "Grundy", "Hamilton", "Hancock", "Hardin", "Henderson", "Henry", "Iroquois", "Jackson", "Jasper", "Jefferson", "Jersey", "Jo Daviess", "Johnson", "Kane", "Kankakee", "Kendall", "Knox", "Lake", "LaSalle", "Lawrence", "Lee", "Livingston", "Logan", "McDonough", "McHenry", "McLean", "Macon", "Macoupin", "Madison", "Marion", "Marshall", "Mason", "Massac", "Menard", "Mercer", "Monroe", "Montgomery", "Morgan", "Moultrie", "Ogle", "Peoria", "Perry", "Piatt", "Pike", "Pope", "Pulaski", "Putnam", "Randolph", "Richland", "Rock Island", "St. Clair", "Saline", "Sangamon", "Schuyler", "Scott", "Shelby", "Stark", "Stephenson", "Tazewell", "Union", "Vermilion", "Wabash", "Warren", "Washington", "Wayne", "White", "Whiteside", "Will", "Williamson", "Winnebago", "Woodford"),
Indiana=c("Adams", "Allen", "Bartholomew", "Benton", "Blackford", "Boone", "Brown", "Carroll", "Cass", "Clark", "Clay", "Clinton", "Crawford", "Daviess", "Dearborn", "Decatur", "DeKalb", "Delaware", "Dubois", "Elkhart", "Fayette", "Floyd", "Fountain", "Franklin", "Fulton", "Gibson", "Grant", "Greene", "Hamilton", "Hancock", "Harrison", "Hendricks", "Henry", "Howard", "Huntington", "Jackson", "Jasper", "Jay", "Jefferson", "Jennings", "Johnson", "Knox", "Kosciusko", "LaGrange", "Lake", "LaPorte", "Lawrence", "Madison", "Marion", "Marshall", "Martin", "Miami", "Monroe", "Montgomery", "Morgan", "Newton", "Noble", "Ohio", "Orange", "Owen", "Parke", "Perry", "Pike", "Porter", "Posey", "Pulaski", "Putnam", "Randolph", "Ripley", "Rush", "St. Joseph", "Scott", "Shelby", "Spencer", "Starke", "Steuben", "Sullivan", "Switzerland", "Tippecanoe", "Tipton", "Union", "Vanderburgh", "Vermillion", "Vigo", "Wabash", "Warren", "Warrick", "Washington", "Wayne", "Wells", "White", "Whitley"),
Iowa= c("Adair", "Adams", "Allamakee", "Appanoose", "Audubon", "Benton", "Black Hawk", "Boone", "Bremer", "Buchanan", "Buena Vista", "Butler", "Calhoun", "Carroll", "Cass", "Cedar", "Cerro Gordo", "Cherokee", "Chickasaw", "Clarke", "Clay", "Clayton", "Clinton", "Crawford", "Dallas", "Davis", "Decatur", "Delaware", "Des Moines", "Dickinson", "Dubuque", "Emmet", "Fayette", "Floyd", "Franklin", "Fremont", "Greene", "Grundy", "Guthrie", "Hamilton", "Hancock", "Hardin", "Harrison", "Henry", "Howard", "Humboldt", "Ida", "Iowa", "Jackson", "Jasper", "Jefferson", "Johnson", "Jones", "Keokuk", "Kossuth", "Lee", "Linn", "Louisa", "Lucas", "Lyon", "Madison", "Mahaska", "Marion", "Marshall", "Mills", "Mitchell", "Monona", "Monroe", "Montgomery", "Muscatine", "O'Brien", "Osceola", "Page", "Palo Alto", "Plymouth", "Pocahontas", "Polk", "Pottawattamie", "Poweshiek", "Ringgold", "Sac", "Scott", "Shelby", "Sioux", "Story", "Tama", "Taylor", "Union", "Van Buren", "Wapello", "Warren", "Washington", "Wayne", "Webster", "Winnebago", "Winneshiek", "Woodbury", "Worth", "Wright")
)
state_names <- names(state_urls)
all_data <- data.frame()
for (state_index in 1:length(state_names)) {
state_data <- data.frame()
for (county_name in state_counties[[state_index]]) {
county_url_name <- gsub(" ", "-", county_name)
url <- paste0(state_urls[[state_names[state_index]]], county_url_name, "/filter/min-beds=2,max-beds=2,min-baths=1")
webpage <- tryCatch(
{
read_html(url)
},
error = function(e) {
return(NULL)
}
)
if (is.null(webpage)) {
next
}
# Extract price info
price_info <- webpage %>%
html_nodes(xpath = '//*[contains(@id, "MapHomeCard_")]/div/div/div[2]') %>%
html_text()
# Extract county name
county <- rep(county_name, length(price_info))
# Extract state name
state <- rep(state_names[state_index], length(price_info))
# Create a data frame
county_data <- data.frame(State = state, County = county, Price_Info = price_info)
state_data <- rbind(state_data, county_data)
}
all_data <- rbind(all_data, state_data)
}
final_data <- all_data
setwd("~/Documents/Market-Value-Predictor")
TM_link<-"https://www.transfermarkt.us/transfers/transferrekorde/statistik/top/plus/0/galerie/0?saison_id=2019&land_id=&ausrichtung=Sturm&spielerposition_id=&altersklasse=&jahrgang=0&leihe=&w_s="
TMatt<-read.csv("/Users/anweshanadhikari/Documents/Market-Value-Predictor/transferfee/Forwards.csv")
TMatt<-read.csv("/Users/anweshanadhikari/Documents/Market-Value-Predictor/transferfee/Forwards.csv")
TMatt$Position<-"Forward"
colnames(TM_att) <- trimws(colnames(TM_att))
TMatt <- TM_att%>%select(hauptlink, Position, `inline.table`, hauptlink.2, `inline.table.2`, rechts)
TMatt$name<-TM_att$hauptlink
TMatt$transfer_fee<-TMatt$rechts
TMatt$detailed_position<-TMatt$inline.table
TMatt$league<-TMatt$inline.table.2
TMatt$club<-TMatt$hauptlink.2
TMatt<-TMatt%>%select(name,transfer_fee,Position,club,league,detailed_position)
TMdef<-read.csv("/Users/anweshanadhikari/Documents/Market-Value-Predictor/transferfee/defenders.csv")
TMdef$Position<-"Defence"
colnames(TMdef) <- trimws(colnames(TMdef))
TMdef <- TMdef%>%select(hauptlink, Position, `inline.table`, hauptlink.2, `inline.table.2`, rechts)
TMdef$name<-TMdef$hauptlink
TMdef$transfer_fee<-TMdef$rechts
TMdef$detailed_position<-TMdef$inline.table
TMdef$league<-TMdef$inline.table.2
TMdef$club<-TMdef$hauptlink.2
TMdef<-TMdef%>%select(name,transfer_fee,Position,club,league,detailed_position)
TMmid<-read.csv("/Users/anweshanadhikari/Documents/Market-Value-Predictor/transferfee/Midfielders.csv")
TMmid$Position<-"Midfield"
colnames(TMmid) <- trimws(colnames(TMmid))
TMmid <- TMmid%>%select(hauptlink, Position, `inline.table`, hauptlink.2, `inline.table.2`, rechts)
TMmid$name<-TMmid$hauptlink
TMmid$transfer_fee<-TMmid$rechts
TMmid$detailed_position<-TMmid$inline.table
TMmid$league<-TMmid$inline.table.2
TMmid$club<-TMmid$hauptlink.2
TMmid<-TMmid%>%select(name,transfer_fee,Position,club,league,detailed_position)
TMgk<-read.csv("/Users/anweshanadhikari/Documents/Market-Value-Predictor/transferfee/GKs.csv")
TMgk$Position<-"GK
colnames(TMgk) <- trimws(colnames(TMgk))
View(TMgk)
VIW(TMgk)
2+2
2+@
2+2
2+2
